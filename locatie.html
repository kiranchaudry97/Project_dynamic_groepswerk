<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Locaties | BrusselsExplorer</title>
  <link rel="stylesheet" href="css/styl.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <header>
        <nav class="navigatiebalk">
          <a href="index.html">
            <img src="images/logo%20brussel%20parcours.png" alt="Logo BrusselsExplorer" class="logo" />
          </a>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="locatie.html" class="active">Locatie</a></li>
            <li><a href="about.html">Over ons</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="login.html">Login</a></li>
          </ul>
        </nav>
    </header>

 


    <div class="filters">
        <div class="zoekgroep">
          <input type="text" id="zoekveld" placeholder=" Zoek op titel of beschrijving..." />
          <button id="zoekBtn" title="Zoeken">üîç</button>
        </div>

        
        

        
        <select id="auteurFilter"><option value="">Alle kunstenaars</option></select>
        <select id="jaarFilter"><option value="">Alle jaren</option></select>
        <select id="sorteerJaar">
          <option value="">Sorteer op...</option>
          <option value="nieuwste">Nieuwste eerst</option>
          <option value="oudste">Oudste eerst</option>
          <option value="az">A-Z</option>
        </select>
      </div>
      


<!-- notatie : toggle knop voor weergave -->
<div class="toggle-view">
  <button id="toggleView">Wissel naar kaartweergave</button>
</div>

<div id="foutmelding" style="display: none; color: white; background-color: #C4501B; padding: 15px; text-align: center; border-radius: 8px; margin: 20px auto; max-width: 800px;">
    ‚ö†Ô∏è Er is iets misgegaan.
</div>





<!-- notatie : informatiecontainer -->
<section class="locatie-container">
  <h1>üìç Stripmuren & Locaties in Brussel</h1>
  <p class="overzichtp"><a href="contact.html">Meld bij probleem of opmerking in onze contact formulier</a></p>

  <p>Ontdek unieke locaties met stripkunst verspreid over de stad.</p>
  <div id="locaties" class="locatie-grid"></div>

  <p id="zoekFout" style="display: none; color: #C4501B; text-align: center; font-weight: 500;">
    ‚ùå Deze informatie bestaat niet.
  </p>


  <!-- notatie :tabelweergave -->
  <div id="locatieTabel" style="overflow-x: auto; display:none; margin-top: 40px;">
    <table style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr style="background-color: #C4501B; color: white;">
          <th style="padding: 10px;">Titel</th>
          <th style="padding: 10px;">Kunst</th>
          <th style="padding: 10px;">Adres</th>
          <th style="padding: 10px;">Jaar</th>
          <th style="padding: 10px;">Beschrijving</th>
          <th style="padding: 10px;">Link</th>
        </tr>
      </thead>
      <tbody id="locatieTabelBody"></tbody>
    </table>
  </div>

  <!-- notatie : kaartweergave -->
  <div id="map"></div>
</section>

<!-- notatie : scripts -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="js/location.js"></script>


<script>
  document.addEventListener("DOMContentLoaded", function () {
  const locationTable = document.getElementById('locationTable').getElementsByTagName('tbody')[0];
  const favoritesTable = document.getElementById('favoritesTable').getElementsByTagName('tbody')[0];
  const commentsTable = document.getElementById('commentsTable').getElementsByTagName('tbody')[0];

  function laadGegevens(key) {
    return JSON.parse(localStorage.getItem(key)) || [];
  }

  function verwijderItem(key, index) {
    const items = laadGegevens(key);
    items.splice(index, 1);
    localStorage.setItem(key, JSON.stringify(items));
    location.reload();
  }

  function laadFavorieten() {
    favoritesTable.innerHTML = '';
    const favorieten = laadGegevens("favorieten");

    favorieten.forEach((item) => {
      let row = favoritesTable.insertRow();
      row.insertCell(0).textContent = item.titel;
      row.insertCell(1).textContent = item.beschrijving || "Geen beschrijving.";
      row.insertCell(2).textContent = "1";
    });
  }

  laadFavorieten();

  laadGegevens("adminLocaties").forEach((locatie, index) => {
    let row = locationTable.insertRow();
    row.insertCell(0).textContent = locatie.naam;
    row.insertCell(1).textContent = locatie.beschrijving;

    let deleteCell = row.insertCell(2);
    let deleteButton = document.createElement('button');
    deleteButton.textContent = 'Verwijder';
    deleteButton.onclick = () => verwijderItem("adminLocaties", index);
    deleteCell.appendChild(deleteButton);
  });

  laadGegevens("gebruikersOpmerkingen").forEach((item, index) => {
    let row = commentsTable.insertRow();
    row.insertCell(0).textContent = item.voornaam || "Onbekend";
    row.insertCell(1).textContent = item.achternaam || "Onbekend";
    row.insertCell(2).textContent = item.email || "Geen e-mail";
    row.insertCell(3).textContent = item.telefoonnummer || "Geen telefoonnummer";
    row.insertCell(4).textContent = item.opmerking || "Geen opmerking.";

    let actieCell = row.insertCell(5);
    let deleteBtn = document.createElement("button");
    deleteBtn.textContent = "Verwijder";
    deleteBtn.onclick = () => verwijderItem("gebruikersOpmerkingen", index);
    actieCell.appendChild(deleteBtn);
  });

  if (localStorage.getItem("isAdmin") === "true") {
    document.getElementById("locationForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const naam = document.getElementById("locationName").value.trim();
      const beschrijving = document.getElementById("locationDescription").value.trim();
      const adres = document.getElementById("locationAddress")?.value.trim() || "Nog niet gespecificeerd";
      const afbeelding = document.getElementById("locationImage")?.value.trim() || "https://via.placeholder.com/400x200?text=Geen+afbeelding";

      if (!naam || !beschrijving) {
        alert("‚ö†Ô∏è Vul alle verplichte velden in.");
        return;
      }

      const adminLocaties = laadGegevens("adminLocaties");
      adminLocaties.push({
        naam,
        beschrijving,
        auteur: "Beheerder",
        realisation: new Date().getFullYear(),
        adresse: adres,
        afbeelding: afbeelding,
        images: [{ url: afbeelding }]
      });

      localStorage.setItem("adminLocaties", JSON.stringify(adminLocaties));
      alert("‚úÖ Locatie toegevoegd!");
      location.reload();
    });
  } else {
    const formElement = document.getElementById("locationForm");
    if (formElement) {
      formElement.style.display = "none";
      const waarschuwing = document.createElement("p");
      waarschuwing.textContent = "üîí Enkel beheerders kunnen nieuwe locaties toevoegen.";
      formElement.parentElement?.appendChild(waarschuwing);
    }
  }
});

</script>

</body>
</html>